(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ui71:function(e,t,s){"use strict";s.r(t);var a=s("ofXK"),r=s("tyNb"),i=s("XNiG"),c=s("1G5W"),n=s("fXoL"),o=s("AytR"),b=s("2Vo4"),p=s("z6cu"),u=s("tk/3");let h=(()=>{class e{constructor(e){this.http=e,this.petsBehaviourSubject=new b.a([]),this.pets$=this.petsBehaviourSubject.asObservable(),this.totalItemsBehaviourSubject=new b.a(null),this.totalItemsObservable$=this.totalItemsBehaviourSubject.asObservable()}loadInitialState(){this.page=1,this.limit=5,this.activeService$=new i.a}nextPage(){this.page++}setRecordsPerPage(e){this.limit=e}loadPets(e){const t=this.getQueryParams(e);this.http.get(t).pipe(Object(c.a)(this.activeService$)).subscribe(e=>{this.petsBehaviourSubject.next(e.data),this.totalItemsBehaviourSubject.next(e.totalItems)})}unsubcribe(){this.activeService$.next(),this.activeService$.complete()}getQueryParams(e){const t=Object.keys(e).reduce((t,s)=>`&${s}=${e[s]}`,"");return`${o.a.api_url}pet/?page=${this.page}&limit=${this.limit}${t}`}handleError(e){let t;return t=e.error instanceof ErrorEvent?`An error occurred: ${e.error.message}`:`Backend returned code ${e.status}: ${e.body.error}`,console.error(e),Object(p.a)(t)}}return e.\u0275fac=function(t){return new(t||e)(n.ac(u.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac}),e})(),l=(()=>{class e{constructor(e){this.http=e,this.petTypesBehaviourSubject=new b.a([]),this.petTypes$=this.petTypesBehaviourSubject.asObservable()}loadInitialState(){this.page=1,this.limit=40,this.activeService$=new i.a}load(e){const t=this.getQueryParams(e);this.http.get(t).pipe(Object(c.a)(this.activeService$)).subscribe(e=>this.petTypesBehaviourSubject.next(e.data))}unsubcribe(){this.activeService$.next(),this.activeService$.complete()}getQueryParams(e){return Object.keys(e).reduce((t,s)=>`&${s}=${e[s]}`,""),`${o.a.api_url}pet-type/?page=${this.page}&limit=${this.limit}`}handleError(e){let t;return t=e.error instanceof ErrorEvent?`An error occurred: ${e.error.message}`:`Backend returned code ${e.status}: ${e.body.error}`,console.error(e),Object(p.a)(t)}}return e.\u0275fac=function(t){return new(t||e)(n.ac(u.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac}),e})(),S=(()=>{class e{constructor(e,t,s){this.route=e,this.petS=t,this.petTS=s,this.activeComponent$=new i.a}ngOnInit(){this.pets$=this.petS.pets$,this.totalItems$=this.petS.totalItemsObservable$,this.petTypes$=this.petTS.petTypes$,this.route.queryParams.pipe(Object(c.a)(this.activeComponent$)).subscribe(e=>{const t="adopted"===e.param;this.queryParams=Object.assign(Object.assign({},this.queryParams),{adopted:t}),this.petS.loadInitialState(),this.petS.loadPets(this.queryParams),this.petTS.loadInitialState(),this.petTS.load({})})}ngOnDestroy(){this.activeComponent$.next(),this.activeComponent$.complete(),this.petS.unsubcribe()}nextPage(e){this.petS.nextPage(),this.petS.loadPets(this.queryParams)}changeRecordsPerPage(e){console.log(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(r.a),n.Nb(h),n.Nb(l))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-pets"]],decls:34,vars:13,consts:[[3,"click"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item"],[1,"page-link"]],template:function(e,t){1&e&&(n.Sb(0,"p"),n.Dc(1,"pets works!"),n.Rb(),n.Sb(2,"pre"),n.Dc(3),n.jc(4,"json"),n.jc(5,"async"),n.Rb(),n.Sb(6,"pre"),n.Dc(7),n.jc(8,"async"),n.Rb(),n.Sb(9,"pre"),n.Dc(10),n.jc(11,"json"),n.jc(12,"async"),n.Rb(),n.Sb(13,"button",0),n.ec("click",(function(e){return t.nextPage(e)})),n.Dc(14,"next Page"),n.Rb(),n.Sb(15,"button",0),n.ec("click",(function(e){return t.changeRecordsPerPage(e)})),n.Dc(16,"increaase petPage"),n.Rb(),n.Sb(17,"nav",1),n.Sb(18,"ul",2),n.Sb(19,"li",3),n.Sb(20,"a",4),n.Dc(21,"Previous"),n.Rb(),n.Rb(),n.Sb(22,"li",3),n.Sb(23,"a",4),n.Dc(24,"1"),n.Rb(),n.Rb(),n.Sb(25,"li",3),n.Sb(26,"a",4),n.Dc(27,"2"),n.Rb(),n.Rb(),n.Sb(28,"li",3),n.Sb(29,"a",4),n.Dc(30,"3"),n.Rb(),n.Rb(),n.Sb(31,"li",3),n.Sb(32,"a",4),n.Dc(33,"Next"),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&e&&(n.Ab(3),n.Ec(n.kc(4,3,n.kc(5,5,t.pets$))),n.Ab(4),n.Ec(n.kc(8,7,t.totalItems$)),n.Ab(3),n.Ec(n.kc(11,9,n.kc(12,11,t.petTypes$))))},pipes:[a.g,a.b],styles:[""]}),e})();s.d(t,"PetsModule",(function(){return m}));const v=[a.c,r.d.forChild([{path:"",component:S}])],d=[h,l];let m=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[...d],imports:[[...v]]}),e})()}}]);